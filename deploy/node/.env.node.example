# =============================================================================
# FluxCode Multi-Host - App Node Env (FluxCode only)
# =============================================================================
# 用途：配合 deploy/docker-compose.node.yml 使用（应用节点服务器）。
# 复制为 .env 后修改：
#   cp .env.node.example .env
# =============================================================================

# -----------------------------------------------------------------------------
# Image
# -----------------------------------------------------------------------------
FLUXCODE_IMAGE=duegin/fluxcode:latest

# -----------------------------------------------------------------------------
# Node Port Mapping
# -----------------------------------------------------------------------------
# 入口层（Caddy/Nginx）需要能访问到本机的 8080。
# 建议绑定内网 IP，并用防火墙限制来源（仅放行入口服务器）。
NODE_BIND_HOST=0.0.0.0
NODE_PORT=8080

# -----------------------------------------------------------------------------
# Server
# -----------------------------------------------------------------------------
SERVER_MODE=release
WEB_TITLE=FluxCode
RUN_MODE=standard
TZ=Asia/Shanghai

# -----------------------------------------------------------------------------
# PostgreSQL (remote)
# -----------------------------------------------------------------------------
DATABASE_HOST=10.0.0.10
DATABASE_PORT=5432
DATABASE_SSLMODE=disable

POSTGRES_USER=fluxcode
POSTGRES_PASSWORD=change_this_secure_password
POSTGRES_DB=fluxcode

# -----------------------------------------------------------------------------
# Redis (remote)
# -----------------------------------------------------------------------------
REDIS_HOST=10.0.0.10
REDIS_PORT=6379
REDIS_PASSWORD=change_this_secure_redis_password
REDIS_DB=0

# -----------------------------------------------------------------------------
# Admin Account (REQUIRED)
# -----------------------------------------------------------------------------
ADMIN_EMAIL=admin@fluxcode.local
ADMIN_PASSWORD=change_this_admin_password

# -----------------------------------------------------------------------------
# JWT (REQUIRED)
# -----------------------------------------------------------------------------
JWT_SECRET=change_this_jwt_secret
JWT_EXPIRE_HOUR=24

# -----------------------------------------------------------------------------
# Connection Pool Tuning (optional)
# -----------------------------------------------------------------------------
DATABASE_MAX_OPEN_CONNS=10
DATABASE_MAX_IDLE_CONNS=5
REDIS_POOL_SIZE=64
REDIS_MIN_IDLE_CONNS=10

